<!--
主题：exedit:drag
问题：
原因：
深究：
收获：
-->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link type="text/css" rel="stylesheet" href="../lib/ztree/css/zTreeStyle/zTreeStyle.css" >
    <title>ztree</title>
</head>
<body>

<div id="treeDemo" class="ztree"></div> <br>


<script type="text/javascript" src="../lib/jquery-2.2.4.min.js"></script>
<script type="text/javascript" src="../lib/ztree/jquery.ztree.all-3.5.js"></script>
<script type="text/javascript">
    <!--

    var setting = {
        data: {
            key: {
                title: "t"
            },
            simpleData: {
                enable: true
            }
        },
        callback : {
            //节点点击事件
            onClick : function (event, treeId, treeNode) {},

            onDrag : function (event, treeId, treeNodes) {
                var treeObj = $.fn.zTree.getZTreeObj( 'treeDemo' );
                var allNodes = treeObj.getNodes();
                console.log( allNodes );
            },

            //拖拽事件
            onDrop : function (event, treeId, treeNodes, targetNode, moveType, isCopy) {
                //获取拖拽以前的整个tree的数据
                var treeObj = $.fn.zTree.getZTreeObj( 'treeDemo' );
                var allNodes = treeObj.getNodes();
                console.log( allNodes );
            }



    },
        edit : {
            drag : {
                isCopy : true
            },
            enable : true
        }

    } ;
    var zNodes =[
        { id:1, pId:0, name:"节点搜索演示 1", t:"id=1", open:true},
        { id:11, pId:1, name:"关键字可以是名字", t:"id=11"},
        { id:12, pId:1, name:"关键字可以是level", t:"id=12"},
        { id:13, pId:1, name:"关键字可以是id", t:"id=13"},
        { id:14, pId:1, name:"关键字可以是各种属性", t:"id=14"},
        { id:2, pId:0, name:"节点搜索演示 2", t:"id=2", open:true},
        { id:21, pId:2, name:"可以只搜索一个节点", t:"id=21"},
        { id:22, pId:2, name:"可以搜索节点集合", t:"id=22"},
        { id:23, pId:2, name:"搜我吧", t:"id=23"},
        { id:3, pId:0, name:"节点搜索演示 3", t:"id=3", open:true },
        { id:31, pId:3, name:"我的 id 是: 31", t:"id=31"},
        { id:32, pId:31, name:"我的 id 是: 32", t:"id=32"},
        { id:33, pId:32, name:"我的 id 是: 33", t:"id=33"}];

    $(document).ready(function () {
        $.fn.zTree.init( $('#treeDemo'), setting, zNodes);
    });

    //-->
</script>
</body>
</html>